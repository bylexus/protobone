!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.Protobone=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c=a("./statics.js"),d=a("./model/Model.js");b.exports=Object.extend(c,{Model:d})},{"./model/Model.js":2,"./statics.js":3}],2:[function(a,b){var c=a("../statics.js"),d=Class.create({idAttribute:"id",urlRoot:"",initialize:function(a){a=a||{},this._attributes={},this._listeners={},this._dirtyAttributes={},this.set(a)},getId:function(){return this[this.idAttribute]||null},setId:function(a){return this[this.idAttribute]=a||null,this._attributes[this.idAttribute]=a||null,this},set:function(a,b){var c={},d={};return a instanceof Object?$H(a).each(function(a){this.set(a.key,a.value)},this):(this._setAttribute(a,b,d,c),this.fireEvent("updated",this,d,c)),this},_setAttribute:function(a,b,c,d){return"string"==typeof a&&(this._attributes[a]!==b&&(d&&(d[a]=this._dirtyAttributes[a]),c&&(c[a]=b),this._dirtyAttributes[a]=b),this._attributes[a]=b,a===this.idAttribute&&this.setId(b)),this},get:function(a){return a?this.hasAttribute(a)?this._attributes[a]:null:Object.clone(this._attributes)},url:function(){var a=this.urlRoot;if(!a)throw new Error("urlRoot not set. Please define an urlRoot in your model.");return this.getId()&&(a+="/"+String(this.getId())),a},save:function(a){var b=this.url(),c=this.getId()?"update":"create";return this._request(b,c,a)},fetch:function(a){if(!this.getId())throw new Error("Cannot be called for new Models");var b=this.url(),c="read";return this._request(b,c,a)},destroy:function(a){if(!this.getId())throw new Error("Cannot be called for new Models");var b=this.url(),c="delete";return this._request(b,c,a)},_request:function(a,b,c){var d={};return c=c||{},Object.extend(d,{onSuccess:function(a){return function(b){this.parse(b),a instanceof Function&&a(b,this)}.bind(this)}.bind(this)(c.onSuccess)}),this.sync(a,b,this,d)},sync:function(){return c.sync.apply(c,arguments)},parse:function(a){a&&a.responseJSON&&this.set(a.responseJSON)},hasAttribute:function(a){return Object.keys(this._attributes).indexOf(a)>=0},on:function(a,b){return this._listeners[a]||(this._listeners[a]=[]),this._listeners[a].push(b),this},off:function(a,b){var c;if(b)for(c=this._listeners[a];c&&c.indexOf(b)>-1;)c.splice(c.indexOf(b),1);else this._listeners[a]=[];return this},fireEvent:function(a){var b=$A(arguments).splice(1),c=!0;return $A(this._listeners[a]).each(function(a){a instanceof Function&&(c=c&&a.apply(null,b)!==!1)}.bind(this)),c}});b.exports=d},{"../statics.js":3}],3:[function(a,b){var c={create:"post",read:"get",update:"put","delete":"delete"},d={create:"post",read:"get",update:"post","delete":"post"},e=function(a,b){return b?d[a]:c[a]},f={emulateHTTP:!0,emulateJSON:!1,sync:function(a,b,d,g){var h=e(b,f.emulateHTTP),i={method:h,contentType:"application/json",postBody:Object.toJSON(d.get()),requestHeaders:{}};return f.emulateHTTP&&(i.requestHeaders["X-HTTP-Method-Override"]=c[b]),g=g||{},Object.extend(i,g),new Ajax.Request(a,i)}};b.exports=f},{}]},{},[1])(1)});