<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Protobone.Collection - protobone</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.8.0pr2/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <script src="http://yui.yahooapis.com/combo?3.8.0pr2/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            <h1><a href="../index.html"><img src="../assets/css/logo.png" width="117" height="52">protobone: Protobone.Collection</a></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.4</em>
        </div>
    </div>
    <div class="yui3-g">

        <div id="sidebar" class="yui3-u">
            <div id="modules" class="sidebox">
                <div class="hd">
                    <h2 class="no-toc">Modules</h2>
                </div>
                <div class="bd">
                    <ul>
                    </ul>
                </div>
            </div>
            
            <div id="classes" class="sidebox">
                <div class="hd">
                    <h2 class="no-toc">Classes</h2>
                </div>
                <div class="bd">
                    <ul>
                            <li><a href="../classes/Protobone.Base.html">Protobone.Base</a></li>
                            <li><a href="../classes/Protobone.Collection.html">Protobone.Collection</a></li>
                            <li><a href="../classes/Protobone.Model.html">Protobone.Model</a></li>
                    </ul>
                </div>
            </div>
            
            <div id="methods-on-page" class="sidebox on-page">
                <div class="hd">
                    <h2 class="no-toc">Methods On Page</h2>
                </div>
                <div class="bd">
                    <ul>
                            <li><a href="#methods_add">add</a></li>
                            <li><a href="#methods_at">at</a></li>
                            <li><a href="#methods_constructor">constructor</a></li>
                            <li><a href="#methods_filter">filter</a></li>
                            <li><a href="#methods_findBy">findBy</a></li>
                            <li><a href="#methods_findWhere">findWhere</a></li>
                            <li><a href="#methods_fireEvent">fireEvent</a></li>
                            <li><a href="#methods_forEach">forEach</a></li>
                            <li><a href="#methods_get">get</a></li>
                            <li><a href="#methods_indexOf">indexOf</a></li>
                            <li><a href="#methods_off">off</a></li>
                            <li><a href="#methods_on">on</a></li>
                            <li><a href="#methods_push">push</a></li>
                            <li><a href="#methods_remove">remove</a></li>
                            <li><a href="#methods_remove">remove</a></li>
                            <li><a href="#methods_where">where</a></li>
                    </ul>
                </div>
            </div>
            
            
            
            
            <div id="fileTree" class="sidebox">
                <div class="hd">
                    <h2 class="no-toc">Files</h2>
                </div>
                <div class="bd">
                    <ul><li>src/<ul><li><a href="../files/src_Base.js.html">Base.js</a></li><li><a href="../files/src_Collection.js.html">Collection.js</a></li><li><a href="../files/src_Model.js.html">Model.js</a></li><li><a href="../files/src_statics.js.html">statics.js</a></li></ul></li></ul>
                </div>
            </div>
            
        </div>

        <div id="main" class="yui3-u">
            <div class="content"><h4>Class Protobone.Collection</h4>
    Extends: <a href="../classes/Protobone.Base.html" class="crosslink">Protobone.Base</a><br>
<span class="foundat">Class defined in: <a href="../files/src_Collection.js.html#l1"><code>src&#x2F;Collection.js:1</code></a></span>
<div class="intro"><p>PrototypeJS Model extension - Enables Prototype JS users to fetch / store
Models from / to a backend using AJAX / REST.
The Collection class stores Models and allows storing / fetching them in a batch.</p>
<p>Inspired by (but not copied) <a href="http://backbonejs.org/">Backbone&#39;s Backbone.Collection</a> and Backbone.sync</p>
</div>

    <a name="methods_Protobone.Collection"></a>
    <div class="method item">
         <strong class="name"><code>Protobone.Collection</code></strong>( <code>  </code> ) 
        <br>
        <span class="foundat">
            
            <a href="../files/src_Collection.js.html#l1"><code>src&#x2F;Collection.js:1</code></a>
        </span><br>
        
    </div>

<div id="classdocs">
    <ul>
        <li><a href="#methods">Methods</a></li>
        <li><a href="#props">Properties</a></li>
    </ul>
    <div>
            <div id="methods">
<a name="methods_add"></a>
<div class="method item">
     <strong class="name"><code>add</code></strong>( <code>{Object} </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/src_Collection.js.html#l72"><code>src&#x2F;Collection.js:72</code></a>
    </span><br>
    <p>The add method takes a Model or an array of Models and adds them to the
internal collection. Plain objects can also be delivered, which will be
transformed to Prototype.Model instances or, if set, to models of the <code>this.model</code> class.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>{Object}</code> <strong>&lt;<a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array" class="crosslink external" target="_blank">Array</a>&gt;</strong>
        <p>data The array / object of model(s) to be added</p>

        </li>
    </ul>
</div>
<a name="methods_at"></a>
<div class="method item">
    Model <strong class="name"><code>at</code></strong>( <code>index </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/src_Collection.js.html#l169"><code>src&#x2F;Collection.js:169</code></a>
    </span><br>
    <p>returns the model at the given index, or null if index is out of bounds</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>index</code> <strong>&lt;Integer&gt;</strong>
        <p>The index to fetch the model for</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;Model&gt; <p>The model at the index or null</p>
</div>
</div>
<a name="methods_constructor"></a>
<div class="method item">
     <strong class="name"><code>constructor</code></strong>( <code>data </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/src_Collection.js.html#l39"><code>src&#x2F;Collection.js:39</code></a>
    </span><br>
    <p>Constructor. A data array can be delivered to create Models already during
construction time (e.g. <code>[{name: &#39;alex&#39;},{name: &#39;barbara&#39;}]</code>)</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>data</code> <strong>&lt;<a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array" class="crosslink external" target="_blank">Array</a>&gt;</strong>
        <p>Initial data (array of key/value pairs) to create Model&#39;s from</p>

        </li>
    </ul>
</div>
<a name="methods_filter"></a>
<div class="method item">
    <a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array" class="crosslink external" target="_blank">Array</a> <strong class="name"><code>filter</code></strong>( <code>predicate </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/src_Collection.js.html#l234"><code>src&#x2F;Collection.js:234</code></a>
    </span><br>
    <p>Returns all models matching a given predicate function. The predicate function
gets the actual model, and must return <code>true</code> if it matches, or <code>false</code> if not.
Example:</p>
<pre class="code prettyprint"><code class="lang-javascript<code>&#x60;</code>">var c = new Protobone.Collection([
    {author: &#39;Stephen King&#39;, title: &#39;Carrie&#39;},
    {author: &#39;Stephen King&#39;, title: &#39;Needful Things&#39;},
    {author: &#39;Jane Austen&#39;, title: &#39;Persuasion&#39;},
]);
var res = c.filter(function(item){
    return item.get(&#39;author&#39;) === &#39;Stephen King&#39;;
});
// =&gt; returns all Models with Stephen King as author
</code></pre>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>predicate</code> <strong>&lt;<a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function" class="crosslink external" target="_blank">Function</a>&gt;</strong>
        <p>The predicate function as test for each model</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;<a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array" class="crosslink external" target="_blank">Array</a>&gt; <p>The matching models</p>
</div>
</div>
<a name="methods_findBy"></a>
<div class="method item">
     <strong class="name"><code>findBy</code></strong>( <code>attribute, value, Returns </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/src_Collection.js.html#l114"><code>src&#x2F;Collection.js:114</code></a>
    </span><br>
    <p>Find a model by a specific attribute value.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>attribute</code> <strong>&lt;<a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String" class="crosslink external" target="_blank">String</a>&gt;</strong>
        <p>The name of the attribute</p>

        </li>
        <li>
            <code>value</code> <strong>&lt;Mixed&gt;</strong>
        <p>The value of the attribute</p>

        </li>
        <li>
            <code>Returns</code> <strong>&lt;Model&gt;</strong>
        <p>the first model with a matching attribute value, or null if none can be found</p>

        </li>
    </ul>
</div>
<a name="methods_findWhere"></a>
<div class="method item">
    Model <strong class="name"><code>findWhere</code></strong>( <code>predicateProps </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/src_Collection.js.html#l128"><code>src&#x2F;Collection.js:128</code></a>
    </span><br>
    <p>Like where,</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>predicateProps</code> <strong>&lt;<a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a>&gt;</strong>
        <p>A key/value hash with attributes/values to match</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;Model&gt; <p>The first matching model</p>
</div>
</div>
<a name="methods_fireEvent"></a>
<div class="method item">
    <a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Boolean" class="crosslink external" target="_blank">Boolean</a> <strong class="name"><code>fireEvent</code></strong>( <code>eventName </code> ) 
    <br>
    <span class="foundat">
         Defined in <a href="Protobone.Base.html#method_fireEvent">Protobone.Base</a>: 
        <a href="../files/src_Base.js.html#l60"><code>src&#x2F;Base.js:60</code></a>
    </span><br>
    <p>Fires an event, informing all listneners that are registered for
the given event name. The fireEvent function can be called with
any number of additional arguments, which are then passed to the event
handler function.</p>
<p>Returns true if NONE of the registered handlers return false: As soon as
one listener returns false, fireEvent will also return false.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>eventName</code> <strong>&lt;<a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String" class="crosslink external" target="_blank">String</a>&gt;</strong>
        <p>The event to fire, e.g. &#39;updated&#39;</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;<a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Boolean" class="crosslink external" target="_blank">Boolean</a>&gt; <p>true when non of the listeners returned false, false if they do so.</p>
</div>
</div>
<a name="methods_forEach"></a>
<div class="method item">
     <strong class="name"><code>forEach</code></strong>( <code>callback </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/src_Collection.js.html#l192"><code>src&#x2F;Collection.js:192</code></a>
    </span><br>
    <p>loops over all models and calls the given callback with <code>callback(model,index)</code>.
Return false within the callback to cancel the loop.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>callback</code> <strong>&lt;<a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function" class="crosslink external" target="_blank">Function</a>&gt;</strong>
        <p>The callback for every item to be called. Return false to cancel the loop</p>

        </li>
    </ul>
</div>
<a name="methods_get"></a>
<div class="method item">
    Model <strong class="name"><code>get</code></strong>( <code>id </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/src_Collection.js.html#l102"><code>src&#x2F;Collection.js:102</code></a>
    </span><br>
    <p>Returns the model by specific ID</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>id</code> <strong>&lt;Mixed&gt;</strong>
        <p>The ID of the model</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;Model&gt; <p>The model if found, or null</p>
</div>
</div>
<a name="methods_indexOf"></a>
<div class="method item">
    Integer <strong class="name"><code>indexOf</code></strong>( <code>model </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/src_Collection.js.html#l181"><code>src&#x2F;Collection.js:181</code></a>
    </span><br>
    <p>returns the index of the given model, or -1 if the model is not in the collection.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>model</code> <strong>&lt;Model&gt;</strong>
        <p>The model to find</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;Integer&gt; <p>The index, or -1 if not in collection</p>
</div>
</div>
<a name="methods_off"></a>
<div class="method item">
     <strong class="name"><code>off</code></strong>( <code>eventName, callback, this </code> ) 
    <br>
    <span class="foundat">
         Defined in <a href="Protobone.Base.html#method_off">Protobone.Base</a>: 
        <a href="../files/src_Base.js.html#l34"><code>src&#x2F;Base.js:34</code></a>
    </span><br>
    <p>Removes a specific event handler for an event, or removes
all listerners from an event.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>eventName</code> <strong>&lt;<a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String" class="crosslink external" target="_blank">String</a>&gt;</strong>
        <p>E.g. &#39;updated&#39;</p>

        </li>
        <li>
            <code>callback</code> <strong>&lt;<a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function" class="crosslink external" target="_blank">Function</a>&gt;</strong>
        <p>The callback to remove. If omitted, all callbacks
  for a specific event are removed</p>

        </li>
        <li>
            <code>this</code> <strong>&lt;<a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Boolean" class="crosslink external" target="_blank">Boolean</a>&gt;</strong>
        
        </li>
    </ul>
</div>
<a name="methods_on"></a>
<div class="method item">
     <strong class="name"><code>on</code></strong>( <code>eventName, callback, this </code> ) 
    <br>
    <span class="foundat">
         Defined in <a href="Protobone.Base.html#method_on">Protobone.Base</a>: 
        <a href="../files/src_Base.js.html#l16"><code>src&#x2F;Base.js:16</code></a>
    </span><br>
    <p>Registers an event handler.
It does not check on duplicity, so you can add the same event
handler multiple times.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>eventName</code> <strong>&lt;<a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String" class="crosslink external" target="_blank">String</a>&gt;</strong>
        <p>The name of the event, e.g. &#39;updated&#39;</p>

        </li>
        <li>
            <code>callback</code> <strong>&lt;<a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function" class="crosslink external" target="_blank">Function</a>&gt;</strong>
        <p>The listener function, called with event-specific {parameters}</p>

        </li>
        <li>
            <code>this</code> <strong>&lt;<a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Boolean" class="crosslink external" target="_blank">Boolean</a>&gt;</strong>
        
        </li>
    </ul>
</div>
<a name="methods_push"></a>
<div class="method item">
     <strong class="name"><code>push</code></strong>( <code>Same </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/src_Collection.js.html#l158"><code>src&#x2F;Collection.js:158</code></a>
    </span><br>
    <p>alias for add(), to support &quot;array like&quot; behaviour</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>Same</code> <strong>&lt;<a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a>&gt;</strong>
        <p>as add, data The array / object of model(s) to be added</p>

        </li>
    </ul>
</div>
<a name="methods_remove"></a>
<div class="method item">
     <strong class="name"><code>remove</code></strong>( <code>The </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/src_Collection.js.html#l264"><code>src&#x2F;Collection.js:264</code></a>
    </span><br>
    <p>Removes the given model(s) (single model or array of models) from the collection.
fires a remove event. If the model occurs multiple times, all of them are removed.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>The</code> <strong>&lt;Model/Array&gt;</strong>
        <p>model(s) to be removed</p>

        </li>
    </ul>
</div>
<a name="methods_remove"></a>
<div class="method item">
     <strong class="name"><code>remove</code></strong>( <code>The </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/src_Collection.js.html#l291"><code>src&#x2F;Collection.js:291</code></a>
    </span><br>
    <p>Removes the model at the index given.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>The</code> <strong>&lt;Integer&gt;</strong>
        <p>index of the model to be removed</p>

        </li>
    </ul>
</div>
<a name="methods_where"></a>
<div class="method item">
    <a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array" class="crosslink external" target="_blank">Array</a> <strong class="name"><code>where</code></strong>( <code>predicateProps </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/src_Collection.js.html#l208"><code>src&#x2F;Collection.js:208</code></a>
    </span><br>
    <p>Simple application of <code>filter()</code> function: returns all models matching
the given attributes, e.g.:</p>
<pre class="code prettyprint"><code class="lang-javascript<code>&#x60;</code>">var c = new Protobone.Collection([
    {author: &#39;Stephen King&#39;, title: &#39;Carrie&#39;},
    {author: &#39;Stephen King&#39;, title: &#39;Needful Things&#39;},
    {author: &#39;Jane Austen&#39;, title: &#39;Persuasion&#39;},
]);
var res = c.where({author: &#39;Stephen King&#39;});
// =&gt; returns all Models with Stephen King as author
</code></pre>
<p>Multiple attributes are allowed.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>predicateProps</code> <strong>&lt;<a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a>&gt;</strong>
        <p>A key/value hash with attributes/values to match</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;<a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array" class="crosslink external" target="_blank">Array</a>&gt; <p>The matching models</p>
</div>
</div>
            </div>
            <div id="props">
                <a name="props_model"></a>
                <div class="props item">
                    <code>model</code> &lt;<strong>Class</strong>&gt;<br>
                    <span class="foundat"><a href="../files/src_Collection.js.html#l31"><code>src&#x2F;Collection.js:31</code></a></span>
                    <p>Defines the model class used when adding models via attribute array.</p>
                
                </div>
                <a name="props_urlRoot"></a>
                <div class="props item">
                    <code>urlRoot</code> &lt;<strong><a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String" class="crosslink external" target="_blank">String</a></strong>&gt;<br>
                    <span class="foundat"><a href="../files/src_Collection.js.html#l20"><code>src&#x2F;Collection.js:20</code></a></span>
                    <p>The URL root for this Collection. Must be set in child classes,
                e.g. to &#39;/entities/Person&#39;, or must be defined in the defined Model.</p>
                <p>Used by the url() function to build the persistence URL.</p>
                
                </div>
            </div>
    </div>
</div>
</div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/js/tabs.js"></script>
</body>
</html>
